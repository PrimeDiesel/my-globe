<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Interactive 3D Globe</title>
<style>
  html, body { margin:0; padding:0; height:100%; overflow:hidden; background:#000; }
  #globeViz { width:100%; height:100%; }
  #globeModal {
    display:none;
    position:absolute;
    top:20px;
    left:20px;
    z-index:1000;
    background:white;
    padding:16px;
    border-radius:12px;
    box-shadow:0 4px 20px rgba(0,0,0,0.3);
    max-width:300px;
    font-family:system-ui;
  }
  #globeModal h3 { margin:0 0 8px; }
</style>
</head>
<body>
<div id="globeViz"></div>
<div id="globeModal">
  <h3>üåç <span id="modal-country-name">Country</span></h3>
  <p><strong>Capital:</strong> <span id="modal-capital">‚Äî</span></p>
  <p><strong>Language:</strong> <span id="modal-language">‚Äî</span></p>
  <p><strong>Culture:</strong> <span id="modal-culture">‚Äî</span></p>
  <button onclick="document.getElementById('globeModal').style.display='none'">Close</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.159.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/globe.gl@2.35.0/dist/globe.gl.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const globe = Globe()(document.getElementById("globeViz"));

  globe.globeMaterial(new THREE.MeshPhongMaterial({
    map: new THREE.TextureLoader().load("https://cdn.jsdelivr.net/npm/three-globe/example/img/earth-blue-marble.jpg"),
    bumpMap: new THREE.TextureLoader().load("https://cdn.jsdelivr.net/npm/three-globe/example/img/earth-topology.png"),
    bumpScale: 0.3,
    specularMap: new THREE.TextureLoader().load("https://cdn.jsdelivr.net/npm/three-globe/example/img/earth-specular.gif"),
    shininess: 10
  }));

  globe.backgroundImageUrl("https://cdn.jsdelivr.net/npm/three-globe/example/img/night-sky.png");
  globe.showAtmosphere(true).atmosphereColor("#88ccff").atmosphereAltitude(0.12);

  globe.controls().autoRotate = true;
  globe.controls().autoRotateSpeed = 0.5;

  const countryData = [
    {name:"USA", capital:"Washington D.C.", lat:38.9, lng:-77.0, language:"English", culture:"Technology, Freedom, Diversity"},
    {name:"China", capital:"Beijing", lat:39.9, lng:116.4, language:"Chinese", culture:"History, Food, Tradition"},
    {name:"Japan", capital:"Tokyo", lat:35.7, lng:139.7, language:"Japanese", culture:"Anime, Etiquette, Technology"},
    {name:"France", capital:"Paris", lat:48.9, lng:2.4, language:"French", culture:"Art, Romance, Cuisine"},
    {name:"Brazil", capital:"Brasilia", lat:-15.8, lng:-47.9, language:"Portuguese", culture:"Football, Carnival, Nature"},
    {name:"Egypt", capital:"Cairo", lat:30.0, lng:31.2, language:"Arabic", culture:"Pyramids, Nile, Pharaohs"},
    {name:"India", capital:"New Delhi", lat:28.6, lng:77.2, language:"Hindi", culture:"Yoga, Bollywood, Spices"},
    {name:"Russia", capital:"Moscow", lat:55.8, lng:37.6, language:"Russian", culture:"Ballet, Vodka, Matryoshka"},
    {name:"Australia", capital:"Canberra", lat:-35.3, lng:149.1, language:"English", culture:"Kangaroo, Surfing, Great Barrier Reef"},
    {name:"Canada", capital:"Ottawa", lat:45.4, lng:-75.7, language:"English/French", culture:"Maple, Hockey, Nature"}
  ];

  function findNearestCountry(lat,lng){
    let nearest=null,minDist=Infinity;
    countryData.forEach(c => {
      const dist=Math.hypot(lat-c.lat,lng-c.lng);
      if(dist<minDist && dist<5){ minDist=dist; nearest=c; }
    });
    return nearest;
  }

  globe.onGlobeClick(coords => {
    const country=findNearestCountry(coords.lat,coords.lng);
    if(country){
      document.getElementById("modal-country-name").textContent=country.name;
      document.getElementById("modal-capital").textContent=country.capital;
      document.getElementById("modal-language").textContent=country.language;
      document.getElementById("modal-culture").textContent=country.culture;
      document.getElementById("globeModal").style.display="block";
    }
  });

  function resizeGlobe(){
    const el=document.getElementById("globeViz");
    el.style.width=window.innerWidth+"px";
    el.style.height=window.innerHeight+"px";
  }
  window.addEventListener("resize",resizeGlobe);
  resizeGlobe();
});
</script>
</body>
</html>
